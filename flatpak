#!/bin/bash

set -e  # Exit on error

# List all system-installed Flatpaks
system_apps=$(flatpak list --system --columns=application)

# Reinstall each system-installed Flatpak into the user scope
for app in $system_apps; do
    echo "ðŸ”„ Reinstalling $app into user scope..."
    flatpak --user install --reinstall --from "$app"
    flatpak --system uninstall -y "$app"
done

# Clean up unused Flatpak runtimes and dependencies
flatpak uninstall --unused -y

echo "ï€Œ All system-installed Flatpaks have been reinstalled into the user scope."
